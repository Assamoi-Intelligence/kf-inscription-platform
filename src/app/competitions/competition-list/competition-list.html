<div class="flex flex-col py-6">
  <div class="flex items-center gap-2">
    <h2 class="font-semibold text-3xl">Comp√©tition</h2>
  </div>
  <p-divider />
</div>
<p-table [tableStyle]="{ 'min-width': '50rem' }"
  [globalFilterFields]="['type', 'personsNames', 'id']" [paginator]="true"
  currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
  [rowHover]="true" [rows]="10" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10, 25, 50]" styleClass="p-datatable-gridlines" #dt
  [value]="competitionList()">
  <ng-template pTemplate="caption">
    <div class="flex justify-between">
      <div class="flex gap-2">
        <p-button (onClick)="onAddCompetition()" label="Ajouter" icon="pi pi-plus" [outlined]="true" severity="secondary" />
      </div>
      <p-iconField iconPosition="left">
        <p-inputIcon><i class="pi pi-search"></i></p-inputIcon>
        <input #search pInputText type="text" (input)="dt.filterGlobal(search.value, 'contains')" placeholder="Rechercher competition" />
      </p-iconField>
    </div>
  </ng-template>
  <ng-template pTemplate="header">
      <tr>
          <th>Date</th>
          <th>Titre</th>
          <th>Type</th>
          <th>Participants</th>
          <th>Actions</th>
      </tr>
  </ng-template>
  <ng-template pTemplate="body" let-competition>
      <tr>
          <td>{{ competition.date | date: "dd/MM/yyyy" }}</td>
          <td>{{ competition.title }}</td>
          <td>{{ competition.type | uppercase}}</td>
          <td>
            <div class="flex gap-2 items-center justify-center">
              <div>{{ competition.participants?.length }}</div>
              <p-button icon="pi pi-plus" outlined pTooltip="Participants" (onClick)="onAddParticipant(competition)"/>
            </div>
          </td>
          <td class="flex gap-2">
            <p-button [disabled]="!competition.participants?.length" (onClick)="onPrint(competition)" icon="pi pi-print" outlined pTooltip="Imprimer"/>
            <p-button  [routerLink]="['/competitions', 'edit', competition.id]" icon="pi pi-pencil" severity="secondary" [outlined]="true" />
            <p-button (onClick)="onDelete(competition)" icon="pi pi-trash" severity="danger" [outlined]="true" />
          </td>
      </tr>
  </ng-template>
</p-table>

<p-confirmdialog />