<form [formGroup]="competitionForm" class="flex flex-col gap-4 my-2">
    <p-float-label variant="on">
        <input
            class="w-full"
            pInputText
            type="text"
            formControlName="title"
            id="title"
            required
            [autofocus]="true"
        />
        <label for="title">Titre compétition</label>
    </p-float-label>
    <p-floatlabel variant="on">
        <p-select
            class="w-full"
            appendTo="body"
            inputId="type"
            formControlName="type"
            showIcon
            iconDisplay="input"
            [options]="competitionTypes"
            optionLabel="label"
            optionValue="value"
        />
        <label for="type">Type</label>
    </p-floatlabel>
    <p-floatlabel variant="on">
        <p-datepicker
          appendTo="body"
          inputId="date"
          formControlName="date"
          showIcon
          class="w-full"
          iconDisplay="input"
          [focusTrap]="false"
          dateFormat="dd.mm.yy"
        />
        <label for="date">Date</label>
    </p-floatlabel>

    <div formArrayName="ageCategories" class="flex flex-col gap-4 mt-4">
        <!-- <div class="flex justify-center">
          <p-button
            icon="pi pi-plus"
          />
        </div> -->
        @for (ageCategory of ageCategories.controls; track $index) {
            <div [formGroup]="ageCategory" class="flex gap-2 items-center">
                <div>
                  <p-float-label variant="on">
                      <p-inputnumber formControlName="min" id="min"/>
                      <label for="min">Min</label>
                  </p-float-label>
                </div>
                <div>à</div>
                 <div>
                    <p-float-label variant="on">
                        <p-inputnumber formControlName="max" id="max"/>
                        <label for="max">Max</label>
                    </p-float-label>
                 </div>
                <div>ans</div>
                <p-button
                    (onClick)="removeAgeCategory($index)"
                    [outlined]="true"
                    icon="pi pi-minus"
                    severity="danger"
                    label=""
                />
            </div>
        }
        <!-- <div class="flex justify-center">
          <p-button
            icon="pi pi-plus"
          />
        </div> -->
    </div>

    <p-button
        styleClass="w-full"
        (onClick)="onSubmit()"
        [disabled]="!competitionForm.valid"
        icon="pi pi-save"
        label="Enregistrer"
        [loading]="isAdding()"
    />
</form>
